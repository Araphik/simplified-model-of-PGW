# Описание

Программа реализует упрощённую модель Packet Gateway (PGW), работающую с логикой пользовательских сессий, туннелями и управлением передачей пакетов на стороне control plane и data plane.

## Ключевые компоненты:

### 1. bearer — туннель передачи данных
Объект bearer отвечает за туннель между UE и APN. Он хранит TEID (Tunnel Endpoint ID) и ассоциирован с одним объектом pdn_connection. Каждый туннель может ограничивать пропускную способность (rate limiting) отдельно для uplink и downlink потоков, используя токен-бакетный алгоритм. Это позволяет контролировать объём передаваемых данных в пределах заданной скорости.

### 2. pdn_connection — сессия пользователя
pdn_connection представляет одну пользовательскую сессию, связанную с конкретным IP-адресом UE и точкой доступа (APN). Хранит список всех туннелей (bearers), включая основной (default bearer), и обеспечивает доступ к соответствующим параметрам (SGW TEID, IP, APN, и пр.). Управляется объектом control_plane.

### 3. control_plane — логика управления сессиями
control_plane занимается созданием, хранением и удалением pdn_connection и bearer объектов. Также реализует маршрутизацию по TEID или IP-адресам, поддерживает таблицу соответствия APN-имен и их шлюзов. При создании PDN автоматически генерируется IP UE вида 10.0.0.X.

### 4. data_plane — обработка пользовательских пакетов
data_plane отвечает за прием и передачу пакетов в uplink и downlink направлениях:
 - В uplink: данные от UE направляются в APN через соответствующий bearer.
 - В downlink: данные от APN передаются к UE, но только если bearer разрешает (учитываются rate limits).

# Как собрать (под Ubuntu)

```bash
sudo apt update
sudo apt install libboost-all-dev
mkdir build && cd build
cmake -DBOOST_ROOT="/mnt/c/Users/Oleg/Desktop/stag/Stag 7/simple-pgw/boost_1_87_0/boost_1_87_0" ..
make
```

# Как запустить тесты 
```bash
cd test
./simple_pgw_tests
```